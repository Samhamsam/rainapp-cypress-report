
> regenserver@2.2.0 dev /home/runner/work/rainapp-frontend/rainapp-frontend/backend
> NODE_ENV=development ; nodemon src/index.js

[33m[nodemon] 2.0.7[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,json[39m
[32m[nodemon] starting `node src/index.js`[39m
2021.01.09, 12:32:02 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:02 DEBUG login/login.js line:20 Getting new data: {"status":"checkAlreadyLoggedIn"}
2021.01.09, 12:32:02 DEBUG login/login.js line:206 cookie session is: {"cookie":{"originalMaxAge":86400000000,"expires":"2023-10-06T12:32:01.719Z","httpOnly":true,"path":"/"}}
2021.01.09, 12:32:02 INFO login/login.js line:209 user has not cookie set
2021.01.09, 12:32:06 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:06 DEBUG login/login.js line:20 Getting new data: {"status":"checkAlreadyLoggedIn"}
2021.01.09, 12:32:06 DEBUG login/login.js line:206 cookie session is: {"cookie":{"originalMaxAge":86400000000,"expires":"2023-10-06T12:32:06.623Z","httpOnly":true,"path":"/"}}
2021.01.09, 12:32:06 INFO login/login.js line:209 user has not cookie set
2021.01.09, 12:32:07 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:07 DEBUG login/login.js line:20 Getting new data: {"status":"create_account","lang":"en","cred":{"id":"74ec209c-8253-427f-9fba-95b8d2d6401a","username":"Test","password":"12345678","email":"test@gmail.com"}}
2021.01.09, 12:32:07 ERROR src/database.js line:125 Cannot get User: {"message":"database is not partitioned","stack":"Error: database is not partitioned\n    at Request._callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/nano/lib/nano.js:168:15)\n    at Request.self.callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:185:22)\n    at Request.emit (events.js:315:20)\n    at Request.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1154:10)\n    at Request.emit (events.js:315:20)\n    at IncomingMessage.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1076:12)\n    at Object.onceWrapper (events.js:421:28)\n    at IncomingMessage.emit (events.js:327:22)\n    at endReadableNT (internal/streams/readable.js:1327:12)","name":"Error","error":"bad_request","reason":"database is not partitioned","scope":"couch","statusCode":400,"request":{"method":"POST","headers":{"content-type":"application/json","accept":"application/json"},"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","body":"{\"selector\":{\"email\":\"test@gmail.com\"}}","qsStringifyOptions":{"arrayFormat":"repeat"}},"headers":{"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","statusCode":400,"cache-control":"must-revalidate","connection":"close","content-type":"application/json","date":"Sat, 09 Jan 2021 12:32:07 GMT","x-couch-request-id":"1f7725a272","x-couchdb-body-time":"0"},"errid":"non_200","description":"couch returned 400"}
2021.01.09, 12:32:07 DEBUG login/login.js line:181 User is: undefined
2021.01.09, 12:32:07 DEBUG login/login.js line:230 eyJhbGciOiJIUzM4NCIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAZ21haWwuY29tIiwiaWF0IjoxNjEwMTk1NTI3fQ.2-QJ7GnO56OB6JXQXfVuVcC6mew8h9WSvfvygAush8OItOBWh3ZpY7zvhTEYTg-4
2021.01.09, 12:32:07 DEBUG src/database.js line:72 create User: {"username":"Test","password":"12345678","email":"test@gmail.com","id":"74ec209c-8253-427f-9fba-95b8d2d6401a"}
2021.01.09, 12:32:07 DEBUG src/database.js line:95 creating views for user
2021.01.09, 12:32:07 ERROR src/database.js line:125 Cannot get User: {"message":"database is not partitioned","stack":"Error: database is not partitioned\n    at Request._callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/nano/lib/nano.js:168:15)\n    at Request.self.callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:185:22)\n    at Request.emit (events.js:315:20)\n    at Request.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1154:10)\n    at Request.emit (events.js:315:20)\n    at IncomingMessage.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1076:12)\n    at Object.onceWrapper (events.js:421:28)\n    at IncomingMessage.emit (events.js:327:22)\n    at endReadableNT (internal/streams/readable.js:1327:12)","name":"Error","error":"bad_request","reason":"database is not partitioned","scope":"couch","statusCode":400,"request":{"method":"POST","headers":{"content-type":"application/json","accept":"application/json"},"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","body":"{\"selector\":{\"email\":\"test@gmail.com\"}}","qsStringifyOptions":{"arrayFormat":"repeat"}},"headers":{"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","statusCode":400,"cache-control":"must-revalidate","connection":"close","content-type":"application/json","date":"Sat, 09 Jan 2021 12:32:07 GMT","x-couch-request-id":"48b4dc7482","x-couchdb-body-time":"0"},"errid":"non_200","description":"couch returned 400"}
2021.01.09, 12:32:07 DEBUG login/login.js line:252 User is: undefined
2021.01.09, 12:32:07 WARN login/login.js line:255 User test@gmail.com with this password does not exist
2021.01.09, 12:32:12 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:12 DEBUG login/login.js line:20 Getting new data: {"status":"checkAlreadyLoggedIn"}
2021.01.09, 12:32:12 DEBUG login/login.js line:206 cookie session is: {"cookie":{"originalMaxAge":86399999999,"expires":"2023-10-06T12:32:12.051Z","httpOnly":true,"path":"/"}}
2021.01.09, 12:32:12 INFO login/login.js line:209 user has not cookie set
2021.01.09, 12:32:13 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:13 DEBUG login/login.js line:20 Getting new data: {"status":"checkAlreadyLoggedIn"}
2021.01.09, 12:32:13 DEBUG login/login.js line:206 cookie session is: {"cookie":{"originalMaxAge":86400000000,"expires":"2023-10-06T12:32:12.976Z","httpOnly":true,"path":"/"}}
2021.01.09, 12:32:13 INFO login/login.js line:209 user has not cookie set
2021.01.09, 12:32:13 INFO src/socketHandler.js line:28 trying to login or create account
2021.01.09, 12:32:13 DEBUG login/login.js line:20 Getting new data: {"status":"login","cred":{"email":"test@gmail.com","password":"12345678"}}
2021.01.09, 12:32:13 ERROR src/database.js line:125 Cannot get User: {"message":"database is not partitioned","stack":"Error: database is not partitioned\n    at Request._callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/nano/lib/nano.js:168:15)\n    at Request.self.callback (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:185:22)\n    at Request.emit (events.js:315:20)\n    at Request.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1154:10)\n    at Request.emit (events.js:315:20)\n    at IncomingMessage.<anonymous> (/home/runner/work/rainapp-frontend/rainapp-frontend/backend/node_modules/request/request.js:1076:12)\n    at Object.onceWrapper (events.js:421:28)\n    at IncomingMessage.emit (events.js:327:22)\n    at endReadableNT (internal/streams/readable.js:1327:12)","name":"Error","error":"bad_request","reason":"database is not partitioned","scope":"couch","statusCode":400,"request":{"method":"POST","headers":{"content-type":"application/json","accept":"application/json"},"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","body":"{\"selector\":{\"email\":\"test@gmail.com\"}}","qsStringifyOptions":{"arrayFormat":"repeat"}},"headers":{"uri":"http://XXXXXX:XXXXXX@127.0.0.1:5984/users/_partition/users/_find","statusCode":400,"cache-control":"must-revalidate","connection":"close","content-type":"application/json","date":"Sat, 09 Jan 2021 12:32:13 GMT","x-couch-request-id":"071657fce2","x-couchdb-body-time":"0"},"errid":"non_200","description":"couch returned 400"}
2021.01.09, 12:32:13 DEBUG login/login.js line:252 User is: undefined
2021.01.09, 12:32:13 WARN login/login.js line:255 User test@gmail.com with this password does not exist
